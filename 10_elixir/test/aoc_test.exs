defmodule AocTest do
  use ExUnit.Case

  @input """
  #...##.####.#.......#.##..##.#.
  #.##.#..#..#...##..##.##.#.....
  #..#####.#......#..#....#.###.#
  ...#.#.#...#..#.....#..#..#.#..
  .#.....##..#...#..#.#...##.....
  ##.....#..........##..#......##
  .##..##.#.#....##..##.......#..
  #.##.##....###..#...##...##....
  ##.#.#............##..#...##..#
  ###..##.###.....#.##...####....
  ...##..#...##...##..#.#..#...#.
  ..#.#.##.#.#.#####.#....####.#.
  #......###.##....#...#...#...##
  .....#...#.#.#.#....#...#......
  #..#.#.#..#....#..#...#..#..##.
  #.....#..##.....#...###..#..#.#
  .....####.#..#...##..#..#..#..#
  ..#.....#.#........#.#.##..####
  .#.....##..#.##.....#...###....
  ###.###....#..#..#.....#####...
  #..##.##..##.#.#....#.#......#.
  .#....#.##..#.#.#.......##.....
  ##.##...#...#....###.#....#....
  .....#.######.#.#..#..#.#.....#
  .#..#.##.#....#.##..#.#...##..#
  .##.###..#..#..#.###...#####.#.
  #...#...........#.....#.......#
  #....##.#.#..##...#..####...#..
  #.####......#####.....#.##..#..
  .#...#....#...##..##.#.#......#
  #..###.....##.#.......#.##...##
  """

  test "1.1" do
    test_input = """
    .#..#
    .....
    #####
    ....#
    ...##
    """

    assert({{3, 4}, _} |> match?(Aoc.best_location(test_input)))
  end

  test "1.2" do
    test_input = """
    ......#.#.
    #..#.#....
    ..#######.
    .#.#.###..
    .#..#.....
    ..#....#.#
    #..#....#.
    .##.#..###
    ##...#..#.
    .#....####
    """

    assert({{5, 8}, _} |> match?(Aoc.best_location(test_input)))
  end

  test "1.3" do
    test_input = """
    #.#...#.#.
    .###....#.
    .#....#...
    ##.#.#.#.#
    ....#.#.#.
    .##..###.#
    ..#...##..
    ..##....##
    ......#...
    .####.###.
    """

    assert({{1, 2}, _} |> match?(Aoc.best_location(test_input)))
  end

  test "1.4" do
    test_input = """
    .#..#..###
    ####.###.#
    ....###.#.
    ..###.##.#
    ##.##.#.#.
    ....###..#
    ..#.#..#.#
    #..#.#.###
    .##...##.#
    .....#.#..
    """

    assert({{6, 3}, _} |> match?(Aoc.best_location(test_input)))
  end

  test "1.5" do
    test_input = """
    .#..##.###...#######
    ##.############..##.
    .#.######.########.#
    .###.#######.####.#.
    #####.##.#.##.###.##
    ..#####..#.#########
    ####################
    #.####....###.#.#.##
    ##.#################
    #####.##.###..####..
    ..######..##.#######
    ####.##.####...##..#
    .#####..#.######.###
    ##...#.##########...
    #.##########.#######
    .####.#.###.###.#.##
    ....##.##.###..#####
    .#.#.###########.###
    #.#.#.#####.####.###
    ###.##.####.##.#..##
    """

    assert({{11, 13}, _} |> match?(Aoc.best_location(test_input)))
  end

  test "2" do
    test_input = """
    .#..##.###...#######
    ##.############..##.
    .#.######.########.#
    .###.#######.####.#.
    #####.##.#.##.###.##
    ..#####..#.#########
    ####################
    #.####....###.#.#.##
    ##.#################
    #####.##.###..####..
    ..######..##.#######
    ####.##.####...##..#
    .#####..#.######.###
    ##...#.##########...
    #.##########.#######
    .####.#.###.###.#.##
    ....##.##.###..#####
    .#.#.###########.###
    #.#.#.#####.####.###
    ###.##.####.##.#..##
    """

    assert(Aoc.zap(test_input) == 802)
  end

  test "part_one", do: assert(Aoc.best_location(@input) == {{17, 22}, 288})
  test "part_two", do: assert(Aoc.zap(@input) == 616)

  test "angle_between_0", do: assert(Aoc.angle_between({8, 3}, {8, 1}) == 0)
  test "angle_between_45", do: assert(Aoc.angle_between({8, 3}, {9, 2}) == 45)
  test "angle_between_90", do: assert(Aoc.angle_between({8, 3}, {12, 3}) == 90)
  test "angle_between_135", do: assert(Aoc.angle_between({8, 3}, {10, 5}) == 135)
  test "angle_between_180", do: assert(Aoc.angle_between({8, 3}, {8, 100}) == 180)
  test "angle_between_270", do: assert(Aoc.angle_between({8, 3}, {7, 3}) == 270)
end
